# Coinbean

åŸºäº [Beancount](https://github.com/beancount/beancount) å¤å¼è®°è´¦ç³»ç»Ÿæ„å»ºçš„ç»¼åˆåŠ å¯†è´§å¸æŠ•èµ„ç»„åˆè·Ÿè¸ªç³»ç»Ÿã€‚

**ç”± [Boyuan Qian](https://github.com/boyuanqian) @ [QAI Lab](https://github.com/qai-lab) åˆ›å»º**

[English](README.md) | ç®€ä½“ä¸­æ–‡

---

ğŸŒ [coinbean.org](https://coinbean.org) | ğŸ¦ [x.com/coinbean_org](https://x.com/coinbean_org)

---

## Coinbean æ˜¯ä»€ä¹ˆï¼Ÿ

Coinbean æ˜¯ä¸€ä¸ªç»“æ„åŒ–çš„ Beancount è´¦æœ¬æ¨¡æ¿ï¼Œç”¨äºè·Ÿè¸ªä»¥ä¸‹å¹³å°çš„åŠ å¯†è´§å¸æŠ•èµ„ç»„åˆï¼š

- å¤šä¸ªä¸­å¿ƒåŒ–äº¤æ˜“æ‰€ï¼ˆCoinbaseã€Binanceã€Kraken ç­‰ï¼‰
- ç¡¬ä»¶å’Œè½¯ä»¶é’±åŒ…ï¼ˆLedgerã€Trezorã€MetaMaskã€Phantomï¼‰
- DeFi åè®®ï¼ˆAaveã€Compoundã€Uniswapã€Raydiumã€Jupiter ç­‰ï¼‰
- æ°¸ç»­åˆçº¦ DEXï¼ˆHyperliquidã€dYdXã€GMXï¼‰
- æµåŠ¨æ€§è´¨æŠ¼åè®®ï¼ˆLidoã€Rocket Poolã€Jitoã€Marinadeï¼‰
- å†è´¨æŠ¼åè®®ï¼ˆEigenLayerã€Solayerï¼‰
- NFT æ”¶è—å“ï¼ˆBAYCã€Azukiã€DeGodsã€æ¯”ç‰¹å¸åºæ•°ç­‰ï¼‰
- è´¨æŠ¼å’ŒæµåŠ¨æ€§æŒ–çŸ¿æ´»åŠ¨
- 110+ ç§åŠ å¯†è´§å¸ï¼Œæ¶µç›– Layer-1ã€Layer-2ã€DeFiã€ç¨³å®šå¸ã€NFT ç­‰

## åŠŸèƒ½ç‰¹æ€§

- **å…¨é¢çš„èµ„äº§è¦†ç›–**ï¼šé¢„é…ç½®æ”¯æŒ 110+ ç§åŠ å¯†è´§å¸å’Œ NFT æ”¶è—å“ï¼ŒåŒ…æ‹¬ BTCã€ETHã€SOL ç­‰
- **å¤šäº¤æ˜“æ‰€æ”¯æŒ**ï¼šè·Ÿè¸ª 10+ ä¸ªä¸»è¦äº¤æ˜“æ‰€çš„èµ„äº§ï¼ˆCoinbaseã€Binanceã€Krakenã€Geminiã€Crypto.com ç­‰ï¼‰
- **DeFi é›†æˆ**ï¼šè®°å½•å€Ÿè´·ã€æµåŠ¨æ€§æ± å’Œè´¨æŠ¼
- **NFT è·Ÿè¸ª**ï¼šæ”¯æŒä»¥å¤ªåŠã€Solanaã€æ¯”ç‰¹å¸åºæ•°ã€Polygon å’Œ Base ä¸Šçš„çƒ­é—¨ NFT æ”¶è—å“
- **æ¯”ç‰¹å¸åºæ•°å’Œ BRC-20**ï¼šè·Ÿè¸ªåºæ•°é“­æ–‡å’Œ BRC-20 ä»£å¸ï¼ˆORDIã€SATS ç­‰ï¼‰
- **ç²¾ç¡®çš„å°æ•°å¤„ç†**ï¼šä¸ºèªã€gwei å’Œå…¶ä»–å°å•ä½é…ç½®äº†å®¹å·®
- **å¤å¼è®°è´¦**ï¼šéµå¾ªæ­£ç¡®çš„ç°¿è®°åŸåˆ™æä¾›å®Œæ•´çš„å®¡è®¡è·Ÿè¸ª
- **ç¨åŠ¡æŠ¥å‘Šå°±ç»ª**ï¼šè·Ÿè¸ªæ¥è‡ªå„ç§æ¥æºçš„èµ„æœ¬åˆ©å¾—ã€è´¹ç”¨å’Œæ”¶å…¥
- **Web ç•Œé¢**ï¼šä½¿ç”¨ Fava å®ç°ç²¾ç¾çš„å¯è§†åŒ–
- **ç®€æ˜“è®¾ç½®**ï¼šåŒ…å«è‡ªåŠ¨åŒ–è®¾ç½®å’Œè¿è¡Œè„šæœ¬

## âš¡ å¿«é€Ÿå‚è€ƒ

| è„šæœ¬ | å‘½ä»¤ | ç”¨é€” |
|--------|---------|---------|
| **è®¾ç½®** | `./setup.sh` | å®‰è£… Beancount å’Œ Favaï¼ŒéªŒè¯è´¦æœ¬ |
| **è¿è¡Œ Fava** | `./run.sh` | åœ¨ http://localhost:5002 å¯åŠ¨ Web ç•Œé¢ |
| **è·å–ä»·æ ¼** | `./prices.sh` | è·å–å½“å‰åŠ å¯†è´§å¸ä»·æ ¼ï¼ˆäº¤äº’å¼èœå•ï¼‰ |

è¯¦ç»†æ–‡æ¡£è¯·å‚é˜…[è¾…åŠ©è„šæœ¬](#è¾…åŠ©è„šæœ¬)éƒ¨åˆ†ã€‚

## å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- Python 3.7+
- pipï¼ˆPython åŒ…ç®¡ç†å™¨ï¼‰

### ä¸‰ä¸ªç®€å•æ­¥éª¤

**æ­¥éª¤ 1ï¼šè®¾ç½®**

```bash
cd /path/to/coinbean
./setup.sh
```

å®‰è£… Beancountã€Fava å¹¶éªŒè¯æ‚¨çš„è´¦æœ¬æ–‡ä»¶ã€‚

**æ­¥éª¤ 2ï¼šå¯åŠ¨ Fava**

```bash
./run.sh
```

åœ¨ http://localhost:5002 å¯åŠ¨ Web ç•Œé¢ã€‚

**æ­¥éª¤ 3ï¼šè·å–ä»·æ ¼**

```bash
./prices.sh
```

äº¤äº’å¼èœå•è·å–å½“å‰åŠ å¯†è´§å¸ä»·æ ¼ã€‚

> ğŸ“š è¯¦ç»†æ–‡æ¡£è¯·å‚é˜…[è¾…åŠ©è„šæœ¬](#è¾…åŠ©è„šæœ¬)éƒ¨åˆ†ã€‚

### æ‰‹åŠ¨å®‰è£…ï¼ˆæ›¿ä»£æ–¹æ¡ˆï¼‰

å¦‚æœæ‚¨å–œæ¬¢æ‰‹åŠ¨å®‰è£…ï¼š

```bash
pip install beancount fava

# éªŒè¯å®‰è£…
bean-check crypto_main.beancount

# å¯åŠ¨ Fava
fava -p 5002 crypto_main.beancount
```

### é¦–æ¬¡ä½¿ç”¨æ­¥éª¤

1. **æŸ¥çœ‹ç¤ºä¾‹**ï¼šæ‰“å¼€ `crypto_examples.beancount` æŸ¥çœ‹ 20+ ä¸ªäº¤æ˜“ç¤ºä¾‹
2. **æ›´æ–°ä»·æ ¼**ï¼šè¿è¡Œ `./prices.sh` è·å–å½“å‰å¸‚åœºä»·æ ¼ï¼ˆ[æŸ¥çœ‹è¯¦æƒ…](#3-pricessh---äº¤äº’å¼ä»·æ ¼è·å–å™¨)ï¼‰
3. **æ·»åŠ æ‚¨çš„äº¤æ˜“**ï¼šå¼€å§‹åœ¨ `tx_2025.beancount` ä¸­è®°å½•
4. **è‡ªå®šä¹‰è´¦æˆ·**ï¼šä¿®æ”¹æ¨¡å—åŒ–æ–‡ä»¶ï¼ˆ`exchanges.beancount`ã€`chains.beancount`ã€`defi.beancount`ï¼‰ä»¥åŒ¹é…æ‚¨çš„è®¾ç½®
5. **æµè§ˆ Fava**ï¼šæ‰“å¼€ http://localhost:5002 å¯è§†åŒ–æ‚¨çš„æŠ•èµ„ç»„åˆï¼ˆ[æŸ¥çœ‹è¯¦æƒ…](#2-runsh---å¯åŠ¨-fava-web-ç•Œé¢)ï¼‰

## æ–‡ä»¶ç»“æ„

Coinbean ä½¿ç”¨**æ¨¡å—åŒ–ç»“æ„**ä»¥ä¾¿æ›´å¥½åœ°ç»„ç»‡ï¼š

```
crypto/
â”œâ”€â”€ crypto_main.beancount       # ä¸»è´¦æœ¬ï¼ŒåŒ…å«å•†å“å®šä¹‰å’Œå¯¼å…¥
â”œâ”€â”€ exchanges.beancount         # ä¸­å¿ƒåŒ–äº¤æ˜“æ‰€è´¦æˆ·ï¼ˆCoinbaseã€Binance ç­‰ï¼‰
â”œâ”€â”€ chains.beancount            # åŒºå—é“¾é’±åŒ…å’ŒåŸç”Ÿè´¨æŠ¼
â”œâ”€â”€ defi.beancount              # DeFi åè®®ã€æµåŠ¨æ€§è´¨æŠ¼ã€å†è´¨æŠ¼
â”œâ”€â”€ crypto_prices.beancount     # æ‰€æœ‰èµ„äº§çš„ä»·æ ¼æ•°æ®
â”œâ”€â”€ tx_2024.beancount           # 2024 å¹´äº¤æ˜“
â”œâ”€â”€ tx_2025.beancount           # 2025 å¹´äº¤æ˜“
â”œâ”€â”€ crypto_examples.beancount   # 20+ ä¸ªç¤ºä¾‹äº¤æ˜“ï¼ˆå‚è€ƒï¼‰
â”œâ”€â”€ fetch_prices.py             # ä» CoinGecko è‡ªåŠ¨è·å–ä»·æ ¼
â”œâ”€â”€ prices.sh                   # fetch_prices.py çš„ä¾¿æ·åŒ…è£…å™¨
â”œâ”€â”€ setup.sh                    # è‡ªåŠ¨åŒ–è®¾ç½®å’Œå®‰è£…è„šæœ¬
â”œâ”€â”€ run.sh                      # å¯åŠ¨ Fava Web ç•Œé¢
â””â”€â”€ README.md                   # æœ¬æ–‡ä»¶
```

## è´¦æˆ·ç»“æ„

Coinbean éµå¾ª Beancount çš„**å¤å¼è®°è´¦**åŸåˆ™ï¼Œé‡‡ç”¨åˆ†å±‚è´¦æˆ·ç»“æ„ï¼š

```
Assets:Crypto
â”œâ”€â”€ Exchange                    # ä¸­å¿ƒåŒ–äº¤æ˜“æ‰€
â”‚   â”œâ”€â”€ Coinbase
â”‚   â”‚   â”œâ”€â”€ Cash:USD           # æ³•å¸ä½™é¢
â”‚   â”‚   â”œâ”€â”€ BTC                # æ¯”ç‰¹å¸ä½™é¢
â”‚   â”‚   â”œâ”€â”€ ETH                # ä»¥å¤ªåŠä½™é¢
â”‚   â”‚   â””â”€â”€ Other              # å…¶ä»–ä»£å¸
â”‚   â”œâ”€â”€ Binance
â”‚   â”œâ”€â”€ Kraken
â”‚   â””â”€â”€ [10+ äº¤æ˜“æ‰€...]
â”‚
â”œâ”€â”€ Wallet                      # è‡ªæ‰˜ç®¡é’±åŒ…
â”‚   â”œâ”€â”€ Ledger                 # ç¡¬ä»¶é’±åŒ…
â”‚   â”‚   â”œâ”€â”€ BTC
â”‚   â”‚   â””â”€â”€ ETH
â”‚   â”œâ”€â”€ MetaMask               # è½¯ä»¶é’±åŒ…
â”‚   â”œâ”€â”€ Phantom
â”‚   â””â”€â”€ [æ›´å¤šé’±åŒ…...]
â”‚
â”œâ”€â”€ Staking                     # åŸç”ŸåŒºå—é“¾è´¨æŠ¼
â”‚   â”œâ”€â”€ ETH
â”‚   â”‚   â”œâ”€â”€ Delegated          # è´¨æŠ¼é‡‘é¢
â”‚   â”‚   â””â”€â”€ Rewards            # èµšå–çš„å¥–åŠ±
â”‚   â”œâ”€â”€ SOL
â”‚   â”œâ”€â”€ ADA
â”‚   â””â”€â”€ [æ›´å¤šé“¾...]
â”‚
â”œâ”€â”€ DeFi                        # DeFi åè®®
â”‚   â”œâ”€â”€ Aave                   # å€Ÿè´·
â”‚   â”‚   â”œâ”€â”€ USDC
â”‚   â”‚   â””â”€â”€ ETH
â”‚   â”œâ”€â”€ Uniswap                # DEX
â”‚   â”‚   â””â”€â”€ LPTokens
â”‚   â”œâ”€â”€ Hyperliquid            # æ°¸ç»­åˆçº¦ DEX
â”‚   â”œâ”€â”€ Lido                   # æµåŠ¨æ€§è´¨æŠ¼
â”‚   â”‚   â””â”€â”€ STETH
â”‚   â””â”€â”€ [æ›´å¤šåè®®...]
â”‚
â””â”€â”€ NFT                         # NFT æ”¶è—å“
    â”œâ”€â”€ Ethereum
    â”‚   â”œâ”€â”€ BAYC
    â”‚   â”œâ”€â”€ Azuki
    â”‚   â””â”€â”€ [æ›´å¤šæ”¶è—å“...]
    â”œâ”€â”€ Solana
    â”‚   â”œâ”€â”€ DeGods
    â”‚   â””â”€â”€ MadLads
    â””â”€â”€ Bitcoin
        â””â”€â”€ NodeMonkes

Liabilities:Crypto
â””â”€â”€ DeFi                        # DeFi è´·æ¬¾
    â”œâ”€â”€ Aave:Borrowed
    â””â”€â”€ Compound:Borrowed

Income:Crypto
â”œâ”€â”€ Staking:Rewards             # è´¨æŠ¼æ”¶å…¥
â”œâ”€â”€ Mining:Rewards              # æŒ–çŸ¿æ”¶å…¥
â”œâ”€â”€ Airdrops                    # ç©ºæŠ•ä»£å¸
â”œâ”€â”€ Referrals                   # æ¨èå¥–é‡‘
â””â”€â”€ Trading:CapitalGains        # å·²å®ç°æ”¶ç›Š

Expenses:Crypto
â”œâ”€â”€ Trading:Fees                # äº¤æ˜“æ‰€è´¹ç”¨
â”œâ”€â”€ Withdrawal:Fees             # ææ¬¾è´¹ç”¨
â”œâ”€â”€ Gas                         # äº¤æ˜“è´¹ç”¨
â”‚   â”œâ”€â”€ Ethereum
â”‚   â”œâ”€â”€ Solana
â”‚   â””â”€â”€ [å…¶ä»–é“¾...]
â””â”€â”€ Trading:Losses              # å·²å®ç°æŸå¤±

Equity:Opening-Balances         # åˆå§‹ä½™é¢
```

### è´¦æˆ·å‘½åçº¦å®š

Coinbean ä½¿ç”¨ä¸€è‡´çš„åˆ†å±‚å‘½åç»“æ„ï¼š

```
Assets:Crypto:{ç±»å‹}:{å¹³å°}:{èµ„äº§}
             â””â”€â”€â”¬â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”¬â”€â”€â”˜
              ç±»å‹     å¹³å°     å…·ä½“ä»£å¸
```

**ç¤ºä¾‹ï¼š**
- `Assets:Crypto:Exchange:Coinbase:BTC` - Coinbase ä¸Šçš„æ¯”ç‰¹å¸
- `Assets:Crypto:Wallet:Ledger:ETH` - Ledger ä¸Šçš„ä»¥å¤ªåŠ
- `Assets:Crypto:DeFi:Aave:USDC` - å­˜å…¥ Aave çš„ USDC
- `Assets:Crypto:Staking:SOL:Delegated` - è´¨æŠ¼çš„ Solana
- `Assets:Crypto:NFT:Ethereum:BAYC` - Bored Ape Yacht Club NFT

**æç¤ºï¼š**
- å¹³å°åç§°ä½¿ç”¨é©¼å³°å‘½åæ³•ï¼ˆä¾‹å¦‚ `MetaMask` è€Œä¸æ˜¯ `metamask`ï¼‰
- èµ„äº§ä»£ç ä¿æŒå¤§å†™ï¼ˆä¾‹å¦‚ `BTC`ã€`ETH`ï¼‰
- åœ¨æ‰€æœ‰äº¤æ˜“ä¸­ä¿æŒä¸€è‡´

### æ¨¡å—åŒ–ç»„ç»‡è¯´æ˜

**ğŸ¯ crypto_main.beancount** - æ‚¨è´¦æœ¬çš„æ ¸å¿ƒ

è¿™æ˜¯å°†æ‰€æœ‰å†…å®¹è”ç³»åœ¨ä¸€èµ·çš„ä¸»å…¥å£ç‚¹ã€‚å®ƒåŒ…å«ï¼š
- **110+ ç§åŠ å¯†è´§å¸å•†å“å®šä¹‰**ï¼ˆBTCã€ETHã€SOLã€NFT ä»£å¸ã€BRC-20 ç­‰ï¼‰
- **æ”¶å…¥/æ”¯å‡º/æƒç›Šè´¦æˆ·**ï¼ˆèµ„æœ¬åˆ©å¾—ã€è´¨æŠ¼å¥–åŠ±ã€Gas è´¹ç”¨ç­‰ï¼‰
- **æ¨¡å—å¯¼å…¥**é€šè¿‡ `include` è¯­å¥
- **æ ¸å¿ƒé…ç½®**ï¼ˆå®¹å·®ã€è¿è¥è´§å¸ã€æ’ä»¶ï¼‰

**ä½•æ—¶ç¼–è¾‘ï¼š**æ·»åŠ æ–°åŠ å¯†è´§å¸ã€æ›´æ”¹å®¹å·®ã€å¯ç”¨/ç¦ç”¨æ¨¡å—

**ğŸ’± exchanges.beancount** - ä¸­å¿ƒåŒ–äº¤æ˜“æ‰€è´¦æˆ·

é¢„é…ç½®äº† 10+ ä¸ªä¸»è¦äº¤æ˜“æ‰€çš„è´¦æˆ·ï¼š
- **ä¸€çº¿**ï¼šCoinbaseã€Binanceã€Krakenã€Gemini
- **äºŒçº¿**ï¼šCrypto.comã€KuCoinã€Bybitã€OKXã€HTXã€Gate.io

æ¯ä¸ªäº¤æ˜“æ‰€éƒ½æœ‰ï¼š
- æ³•å¸è´¦æˆ·ï¼ˆUSDã€EURï¼‰
- ä¸»è¦åŠ å¯†è´§å¸è´¦æˆ·ï¼ˆBTCã€ETHã€SOLã€ç¨³å®šå¸ï¼‰
- é€šç”¨"Other"è´¦æˆ·ç”¨äºå±±å¯¨å¸

**ä½•æ—¶ç¼–è¾‘ï¼š**æ·»åŠ æ‚¨ä½¿ç”¨çš„æ–°äº¤æ˜“æ‰€ï¼Œåˆ é™¤æ‚¨ä¸ä½¿ç”¨çš„äº¤æ˜“æ‰€

**â›“ï¸ chains.beancount** - è‡ªæ‰˜ç®¡å’ŒåŸç”Ÿè´¨æŠ¼

åŒ…å«ä»¥ä¸‹è´¦æˆ·ï¼š
- **ç¡¬ä»¶é’±åŒ…**ï¼šLedgerã€Trezor
- **è½¯ä»¶é’±åŒ…**ï¼šMetaMaskã€Phantomã€Sui Walletã€Trust Wallet ç­‰
- **åŸç”Ÿè´¨æŠ¼**ï¼šETHã€SOLã€ADAã€DOTã€ATOMã€SUIã€AVAX çš„ç›´æ¥è´¨æŠ¼
- **NFT æ”¶è—å“**ï¼šä»¥å¤ªåŠã€Solanaã€æ¯”ç‰¹å¸åºæ•°ã€Polygonã€Base

**ä½•æ—¶ç¼–è¾‘ï¼š**æ·»åŠ æ–°é’±åŒ…ã€è·Ÿè¸ªæ–° NFT æ”¶è—å“ã€è®¾ç½®åŸç”Ÿè´¨æŠ¼

**ğŸ¦ defi.beancount** - DeFi åè®®å’ŒæµåŠ¨æ€§è´¨æŠ¼

å…¨é¢çš„ DeFi è¦†ç›–ï¼š
- **å€Ÿè´·**ï¼šAaveã€Compoundã€MakerDAO
- **DEX**ï¼šUniswapã€SushiSwapã€Curveã€PancakeSwapã€Raydiumã€Jupiterã€Orca
- **æ°¸ç»­åˆçº¦ DEX**ï¼šHyperliquidã€dYdXã€GMX
- **æµåŠ¨æ€§è´¨æŠ¼**ï¼šLidoï¼ˆETHï¼‰ã€Rocket Poolï¼ˆETHï¼‰ã€Jitoï¼ˆSOLï¼‰ã€Marinadeï¼ˆSOLï¼‰
- **å†è´¨æŠ¼**ï¼šEigenLayerã€Solayerã€Renzoã€Ether.fi

**ä½•æ—¶ç¼–è¾‘ï¼š**æ·»åŠ æ‚¨ä½¿ç”¨çš„æ–° DeFi åè®®ã€è·Ÿè¸ªæµåŠ¨æ€§å¤´å¯¸

**ğŸ’° tx_2024.beancount å’Œ tx_2025.beancount** - äº¤æ˜“å†å²

æ‚¨çš„å®é™…äº¤æ˜“è®°å½•ï¼ŒæŒ‰å¹´ä»½åˆ†å¼€ä»¥ä¾¿äºç®¡ç†ã€‚

**ä½•æ—¶ç¼–è¾‘ï¼š**åœ¨è®°å½•åŠ å¯†è´§å¸äº¤æ˜“æ—¶æ¯æ—¥/æ¯å‘¨æ›´æ–°

**ğŸ“Š crypto_prices.beancount** - ä»·æ ¼æ•°æ®

ç”¨äºå‡†ç¡®æŠ•èµ„ç»„åˆä¼°å€¼çš„å†å²ä»·æ ¼æ•°æ®ã€‚

**ä½•æ—¶ç¼–è¾‘ï¼š**
- é€šè¿‡ `./prices.sh --beancount >> crypto_prices.beancount` è‡ªåŠ¨æ›´æ–°
- ä¸º CoinGecko ä¸Šæ²¡æœ‰çš„èµ„äº§æˆ–å†å²ä»·æ ¼æ‰‹åŠ¨æ›´æ–°

**ğŸ“š crypto_examples.beancount** - å­¦ä¹ èµ„æº

20+ ä¸ªç¤ºä¾‹äº¤æ˜“ï¼Œå±•ç¤ºä»¥ä¸‹æœ€ä½³å®è·µï¼š
- äº¤æ˜“æ‰€äº¤æ˜“ã€é’±åŒ…è½¬è´¦ã€è´¨æŠ¼ã€DeFi æ“ä½œã€NFT äº¤æ˜“ç­‰

**ä½•æ—¶ä½¿ç”¨ï¼š**å½“æ‚¨ä¸ç¡®å®šå¦‚ä½•è®°å½•æŸç§äº¤æ˜“ç±»å‹æ—¶å‚è€ƒ

---

**ğŸ’¡ è‡ªå®šä¹‰æç¤ºï¼š**æ‚¨å¯ä»¥åœ¨ `crypto_main.beancount` ä¸­æ³¨é‡Šæ‰æ•´ä¸ªæ¨¡å—ä»¥ä¿æŒè´¦æœ¬ä¸“æ³¨ï¼š

```beancount
;; ä»…åŒ…å«æ‚¨å®é™…ä½¿ç”¨çš„æ¨¡å—
include "exchanges.beancount"    ; âœ“ ä½¿ç”¨äº¤æ˜“æ‰€
include "chains.beancount"       ; âœ“ ä½¿ç”¨é’±åŒ…
; include "defi.beancount"       ; âœ— ä¸ä½¿ç”¨ DeFiï¼ˆå·²æ³¨é‡Šï¼‰
```

## è¾…åŠ©è„šæœ¬

Coinbean åŒ…å«ä¸‰ä¸ªå¼ºå¤§çš„è¾…åŠ©è„šæœ¬ï¼Œä½¿ç®¡ç†åŠ å¯†è´§å¸æŠ•èµ„ç»„åˆæ›´åŠ å®¹æ˜“ã€‚

### 1. `setup.sh` - è‡ªåŠ¨åŒ–å®‰è£…å’Œè®¾ç½®

è®¾ç½®è„šæœ¬è‡ªåŠ¨å¤„ç†æ‰€æœ‰å®‰è£…å’Œé…ç½®ã€‚

**åŠŸèƒ½ï¼š**
- æ£€æŸ¥ Python 3 å®‰è£…
- å®‰è£… Beancount å’Œ Fava åŒ…
- éªŒè¯è´¦æœ¬æ–‡ä»¶è¯­æ³•
- å¯é€‰å®‰è£…ä»·æ ¼è·å–ä¾èµ–é¡¹ï¼ˆrequests åº“ï¼‰
- éªŒè¯ä¸€åˆ‡æ­£å¸¸å·¥ä½œ

**ä½¿ç”¨æ–¹æ³•ï¼š**
```bash
./setup.sh
```

**é¦–æ¬¡è®¾ç½®ï¼š**
```bash
cd /path/to/coinbean
./setup.sh
```

è„šæœ¬å°†é€šè¿‡æ¸…æ™°çš„æç¤ºå’Œé”™è¯¯æ¶ˆæ¯æŒ‡å¯¼æ‚¨å®Œæˆå®‰è£…è¿‡ç¨‹ã€‚

**é¢„æœŸå†…å®¹ï¼š**
1. Python ç‰ˆæœ¬æ£€æŸ¥
2. åŒ…å®‰è£…ï¼ˆå¯èƒ½éœ€è¦ sudo/ç®¡ç†å‘˜æƒé™ï¼‰
3. ä½¿ç”¨ `bean-check` éªŒè¯è´¦æœ¬
4. æˆåŠŸæ¶ˆæ¯å’Œåç»­æ­¥éª¤

### 2. `run.sh` - å¯åŠ¨ Fava Web ç•Œé¢

è¿è¡Œè„šæœ¬å¯åŠ¨ Fava Web ç•Œé¢ä»¥å¯è§†åŒ–æ‚¨çš„æŠ•èµ„ç»„åˆã€‚

**åŠŸèƒ½ï¼š**
- æ£€æŸ¥ Fava æ˜¯å¦å·²å®‰è£…
- åœ¨å¯åŠ¨å‰éªŒè¯æ‚¨çš„è´¦æœ¬æ–‡ä»¶
- åœ¨ç«¯å£ 5002 ä¸Šå¯åŠ¨ Fava
- è‡ªåŠ¨æ‰“å¼€é»˜è®¤æµè§ˆå™¨ï¼ˆå¯é€‰ï¼‰

**ä½¿ç”¨æ–¹æ³•ï¼š**
```bash
./run.sh
```

**ç„¶ååœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ï¼š**
```
http://localhost:5002
```

**åœæ­¢æœåŠ¡å™¨ï¼š**
åœ¨è¿è¡Œ run.sh çš„ç»ˆç«¯ä¸­æŒ‰ `Ctrl+C`ã€‚

**è‡ªå®šä¹‰ç«¯å£ï¼š**
ç¼–è¾‘ `run.sh` å¹¶æ›´æ”¹è„šæœ¬ä¸­çš„ç«¯å£å·ï¼š
```bash
fava -p 5002 crypto_main.beancount  # å°† 5002 æ›´æ”¹ä¸ºæ‚¨å–œæ¬¢çš„ç«¯å£
```

**Fava åŠŸèƒ½ï¼š**
- å¸¦è´¦æˆ·ä½™é¢çš„ç²¾ç¾ä»ªè¡¨æ¿
- äº¤äº’å¼å›¾è¡¨å’Œå›¾å½¢
- æ”¶å…¥/æ”¯å‡ºæŠ¥å‘Š
- èµ„äº§è´Ÿå€ºè¡¨å’Œå‡€å€¼è·Ÿè¸ª
- è‡ªå®šä¹‰æŠ¥å‘Šçš„æŸ¥è¯¢ç¼–è¾‘å™¨

### 3. `prices.sh` - äº¤äº’å¼ä»·æ ¼è·å–å™¨

ä»·æ ¼è·å–è„šæœ¬ä» CoinGecko API è·å–å½“å‰åŠ å¯†è´§å¸ä»·æ ¼ã€‚

**åŠŸèƒ½ï¼š**
- è·å– 110+ ç§åŠ å¯†è´§å¸çš„å®æ—¶ä»·æ ¼
- åœ¨å¸¦æœ‰é“¾ä¿¡æ¯çš„æ ¼å¼åŒ–è¡¨æ ¼ä¸­æ˜¾ç¤ºä»·æ ¼
- æ”¯æŒæŒ‰ç‰¹å®šä»£ç è¿‡æ»¤
- å¯ä»¥è¾“å‡º Beancount æ ¼å¼ä»¥ä¾›ç›´æ¥ä½¿ç”¨
- æ— éœ€ API å¯†é’¥ï¼ˆä½¿ç”¨ CoinGecko å…è´¹å±‚ï¼‰

**äº¤äº’æ¨¡å¼**ï¼ˆæ¨èï¼‰ï¼š
```bash
./prices.sh
```

æ‚¨å°†çœ‹åˆ°ä¸€ä¸ªèœå•ï¼š
```
é€‰æ‹©ä¸€ä¸ªé€‰é¡¹ï¼š
1. æ˜¾ç¤ºæ‰€æœ‰åŠ å¯†è´§å¸ä»·æ ¼
2. æ˜¾ç¤ºç‰¹å®šä»£ç 
3. åˆ—å‡ºæ‰€æœ‰æ”¯æŒçš„èµ„äº§
4. é€€å‡º
```

**å‘½ä»¤è¡Œæ¨¡å¼**ï¼ˆç”¨äºè„šæœ¬ï¼‰ï¼š
```bash
# æ˜¾ç¤ºæ‰€æœ‰ä»·æ ¼
./prices.sh

# æ˜¾ç¤ºç‰¹å®šèµ„äº§
./prices.sh --ticker BTC ETH SOL

# åˆ—å‡ºæ‰€æœ‰æ”¯æŒçš„åŠ å¯†è´§å¸
./prices.sh --list

# è¾“å‡º Beancount æ ¼å¼
./prices.sh --beancount

# è¿‡æ»¤å¹¶è¾“å‡ºåˆ°ä»·æ ¼æ–‡ä»¶
./prices.sh --ticker BTC ETH SOL --beancount >> crypto_prices.beancount
```

**é«˜çº§é€‰é¡¹ï¼š**
```bash
# ä½¿ç”¨ç‰¹å®šæ—¥æœŸ
./prices.sh --date 2025-10-27

# ä¸åŒè´§å¸
./prices.sh --currency eur

# å¤šä¸ªä»£ç ï¼ˆä¸åŒºåˆ†å¤§å°å†™åŒ¹é…ï¼‰
./prices.sh --ticker btc Eth SoL
```

**è‡ªåŠ¨åŒ–ç¤ºä¾‹**ï¼ˆæ¯æ—¥æ›´æ–°çš„ cron ä½œä¸šï¼‰ï¼š
```bash
# ç¼–è¾‘ crontab
crontab -e

# æ·»åŠ è¡Œä»¥åœ¨ä¸Šåˆ 9 ç‚¹æ¯å¤©è·å–ä»·æ ¼
0 9 * * * cd /path/to/coinbean && ./prices.sh --beancount >> crypto_prices.beancount
```

## æ›´æ–°ä»·æ ¼

> åŸºæœ¬ä½¿ç”¨ `prices.sh` è¯·å‚é˜…[è¾…åŠ©è„šæœ¬](#è¾…åŠ©è„šæœ¬)éƒ¨åˆ†ã€‚

æœ¬èŠ‚æ¶µç›–é«˜çº§ä»·æ ¼è·å–åŠŸèƒ½å’Œè‡ªåŠ¨åŒ–ã€‚

### æ–°åŠŸèƒ½

âœ¨ **è¡¨æ ¼æ˜¾ç¤º**ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼Œä»·æ ¼ä»¥æ ¼å¼åŒ–è¡¨æ ¼æ˜¾ç¤ºï¼Œæ˜¾ç¤ºï¼š
- ä»£ç ç¬¦å·
- èµ„äº§åç§°
- åŒºå—é“¾/é“¾ï¼ˆç”¨äºåŒºåˆ†å…·æœ‰ç›¸åŒä»£ç çš„èµ„äº§ï¼‰
- ç±»åˆ«ï¼ˆLayer-1ã€DEXã€æµåŠ¨æ€§è´¨æŠ¼ç­‰ï¼‰
- å½“å‰ä»·æ ¼

âœ¨ **é“¾ä¿¡æ¯**ï¼šé¿å…æ­§ä¹‰ - æŸ¥çœ‹æ¯ä¸ªèµ„äº§å±äºå“ªæ¡é“¾ï¼ˆä¾‹å¦‚ï¼Œä»¥å¤ªåŠä¸Šçš„ USDC ä¸å¤šé“¾ï¼‰

âœ¨ **ä¸åŒºåˆ†å¤§å°å†™çš„è¿‡æ»¤**ï¼šä½¿ç”¨ `--ticker btc` æˆ– `--ticker BTC` - éƒ½å¯ä»¥ï¼

âœ¨ **åŒ…è£…è„šæœ¬**ï¼šä½¿ç”¨ `./prices.sh` è·å¾—å¸¦å½©è‰²è¾“å‡ºçš„ä¾¿æ·ç•Œé¢

### æ”¯æŒçš„åŠ å¯†è´§å¸

è¯¥è„šæœ¬æ”¯æŒ 110+ ç§åŠ å¯†è´§å¸ï¼ŒåŒ…æ‹¬ï¼š
- **Layer 1**ï¼šBTCã€ETHã€SOLã€ADAã€DOTã€AVAXã€ATOMã€ALGOã€XRPã€XLMã€NEARã€FTMã€TONã€APTã€SUIã€TRXã€XTZã€EOSã€FLOWã€SEIã€INJã€KAVAã€THETAã€KAS
- **Layer 2**ï¼šMATICã€OPã€ARBã€IMXã€LRCã€METIS
- **ç¨³å®šå¸**ï¼šUSDTã€USDCã€DAIã€BUSDã€TUSD
- **DeFi**ï¼šUNIã€AAVEã€MKRã€COMPã€SNXã€CRVã€SUSHIã€RUNEã€INCHï¼ˆ1inchï¼‰ã€PENDLEã€DYDXã€GMXã€RAYã€JUPã€ORCA
- **æµåŠ¨æ€§è´¨æŠ¼**ï¼šLDOã€STETHã€RPLã€RETHã€EIGENã€JTOã€JITOSOLã€MNDEã€MSOL
- **AI/ML**ï¼šFETã€AGIXã€OCEANã€TAOã€RNDR
- **æ¸¸æˆ/å…ƒå®‡å®™**ï¼šSANDã€MANAã€AXSã€IMXã€ENJã€GALAã€BLURã€MAGIC
- **NFT ç”Ÿæ€ç³»ç»Ÿ**ï¼šAPEã€LOOKSã€X2Y2ã€SUDOã€BLURã€NFT
- **æ¯”ç‰¹å¸åºæ•°/BRC-20**ï¼šORDIã€SATSã€RATSã€PUPSã€TRAC
- **å­˜å‚¨/åŸºç¡€è®¾æ–½**ï¼šFILã€ARã€GRT
- **RWA å’Œæ–°å…´**ï¼šONDOã€WLDã€PYTH
- **äº¤æ˜“æ‰€ä»£å¸**ï¼šBNBã€CROã€FTTã€HYPE
- **Meme å¸**ï¼šDOGEã€SHIBã€PEPEã€FLOKIã€BONKã€WIF
- **éšç§**ï¼šXMRã€ZEC
- **å…¶ä»–**ï¼šLINKã€LTCã€BCHã€ETCã€VETã€HBARã€ICP

### è®¾ç½®è‡ªåŠ¨ä»·æ ¼æ›´æ–°

åˆ›å»ºæ¯æ—¥ cron ä½œä¸šä»¥è‡ªåŠ¨è·å–ä»·æ ¼ï¼š

```bash
# ç¼–è¾‘ crontab
crontab -e

# æ·»åŠ æ­¤è¡Œä»¥åœ¨ä¸Šåˆ 9 ç‚¹æ¯å¤©è·å–ä»·æ ¼
0 9 * * * cd /path/to/finance/crypto && python3 fetch_prices.py >> crypto_prices.beancount
```

### æ‰‹åŠ¨è¾“å…¥ä»·æ ¼

æ‚¨è¿˜å¯ä»¥æ‰‹åŠ¨å°†ä»·æ ¼æ·»åŠ åˆ° `crypto_prices.beancount`ï¼š

```beancount
2025-10-27 price BTC 67500.00 USD
2025-10-27 price ETH 3250.00 USD
2025-10-27 price SOL 175.00 USD
```

### API é€Ÿç‡é™åˆ¶

CoinGecko å…è´¹å±‚æœ‰é€Ÿç‡é™åˆ¶ï¼ˆçº¦ 50 æ¬¡è°ƒç”¨/åˆ†é’Ÿï¼‰ã€‚è¯¥è„šæœ¬è®¾è®¡ä¸ºé«˜æ•ˆæ‰¹å¤„ç†è¯·æ±‚ï¼Œåœ¨å•ä¸ª API è°ƒç”¨ä¸­è·å–æ‰€æœ‰ä»·æ ¼ã€‚

## äº¤æ˜“ç¤ºä¾‹

### åœ¨äº¤æ˜“æ‰€è´­ä¹°åŠ å¯†è´§å¸

```beancount
2025-01-15 * "Coinbase" "è´­ä¹°æ¯”ç‰¹å¸"
  Assets:Crypto:Exchange:Coinbase:BTC     0.5 BTC {50000.00 USD}
  Assets:Crypto:Exchange:Coinbase:Cash:USD  -25000.00 USD
  Expenses:Crypto:Trading:Fees                   50.00 USD
```

### è½¬è´¦åˆ°å†·é’±åŒ…

```beancount
2025-01-16 * "è½¬è´¦åˆ° Ledger" "å°† BTC è½¬ç§»åˆ°ç¡¬ä»¶é’±åŒ…"
  Assets:Crypto:Wallet:Ledger:BTC            0.5 BTC
  Assets:Crypto:Exchange:Coinbase:BTC       -0.5 BTC
  Expenses:Crypto:Withdrawal:Fees          0.0001 BTC
```

### è´¨æŠ¼å¥–åŠ±

```beancount
2025-01-20 * "è´¨æŠ¼å¥–åŠ±" "ETH è´¨æŠ¼å¥–åŠ±"
  Assets:Crypto:Staking:ETH              0.05 ETH
  Income:Crypto:Staking:Rewards         -0.05 ETH {2500.00 USD}
```

### DeFi å€Ÿè´·

```beancount
2025-01-25 * "Aave" "å­˜å…¥ USDC ä»¥ä¾›å€Ÿè´·"
  Assets:Crypto:DeFi:Aave:USDC              5000 USDC
  Assets:Crypto:Wallet:MetaMask:USDC       -5000 USDC
  Expenses:Crypto:Gas:Ethereum                 15.00 USD
```

### è´­ä¹° NFT

```beancount
2025-02-01 * "OpenSea" "è´­ä¹° Azuki #1234"
  Assets:Crypto:NFT:Ethereum:Azuki         1 AZUKI.1234 {5.5 ETH}
  Assets:Crypto:Wallet:MetaMask:ETH       -5.5 ETH
  Expenses:Crypto:Trading:Fees            0.165 ETH  ; 3% å¸‚åœºè´¹ç”¨
  Expenses:Crypto:Gas:Ethereum            0.005 ETH  ; Gas è´¹ç”¨
```

### å‡ºå”® NFT

```beancount
2025-03-15 * "OpenSea" "å‡ºå”® Doodles #5678"
  Assets:Crypto:Wallet:MetaMask:ETH        8.0 ETH
  Assets:Crypto:NFT:Ethereum:Doodles      -1 DOODLES.5678 {6.0 ETH}
  Expenses:Crypto:Trading:Fees            0.24 ETH   ; 3% å¸‚åœºè´¹ç”¨
  Expenses:Crypto:Gas:Ethereum            0.004 ETH
  Income:Crypto:Trading:CapitalGains     -2.0 ETH    ; NFT é”€å”®æ”¶ç›Š
```

### æ¯”ç‰¹å¸åºæ•°

```beancount
2025-04-10 * "Magic Eden" "é“­åˆ» NodeMonkes #42"
  Assets:Crypto:NFT:Bitcoin:NodeMonkes     1 NODEMONKES.42 {0.15 BTC}
  Assets:Crypto:Wallet:Electrum:BTC       -0.15 BTC
  Expenses:Crypto:Trading:Fees            0.003 BTC
```

### BRC-20 ä»£å¸è´­ä¹°

```beancount
2025-04-20 * "UniSat" "è´­ä¹° ORDI ä»£å¸"
  Assets:Crypto:Exchange:Binance:ORDI      100 ORDI {35.00 USD}
  Assets:Crypto:Exchange:Binance:Cash:USD -3500.00 USD
  Expenses:Crypto:Trading:Fees               10.00 USD
```

## æ”¯æŒçš„èµ„äº§

### Layer-1 åŒºå—é“¾

BTCã€ETHã€SOLã€ADAã€DOTã€AVAXã€ATOMã€ALGOã€XRPã€XLMã€NEARã€FTMã€TONã€APTã€SUIã€LTCã€BCHã€ETC ç­‰

### Layer-2 è§£å†³æ–¹æ¡ˆ

MATICã€OPã€ARB

### ç¨³å®šå¸

USDTã€USDCã€DAIã€BUSDã€TUSD

### DeFi ä»£å¸

UNIã€AAVEã€MKRã€COMPã€SNXã€CRVã€SUSHI

### äº¤æ˜“æ‰€ä»£å¸

BNBã€CROã€FTT

### æ°¸ç»­åˆçº¦ DEX

HYPEï¼ˆHyperliquidï¼‰ã€DYDXï¼ˆdYdXï¼‰ã€GMX

### Solana DEX

RAYï¼ˆRaydiumï¼‰ã€JUPï¼ˆJupiterï¼‰ã€ORCAï¼ˆOrcaï¼‰

### æµåŠ¨æ€§è´¨æŠ¼å’Œå†è´¨æŠ¼

- **ä»¥å¤ªåŠ**ï¼šLDOï¼ˆLidoï¼‰ã€STETHã€RPLï¼ˆRocket Poolï¼‰ã€RETHã€EIGENï¼ˆEigenLayerï¼‰
- **Solana**ï¼šJTOï¼ˆJitoï¼‰ã€JITOSOLã€MNDEï¼ˆMarinadeï¼‰ã€MSOL

### NFT ç”Ÿæ€ç³»ç»Ÿä»£å¸

APEï¼ˆApeCoinï¼‰ã€LOOKSï¼ˆLooksRareï¼‰ã€X2Y2ã€SUDOï¼ˆSudoswapï¼‰ã€BLURï¼ˆBlurï¼‰ã€NFTï¼ˆAPENFTï¼‰

### æ¯”ç‰¹å¸åºæ•°å’Œ BRC-20

ORDIï¼ˆOrdinalsï¼‰ã€SATSã€RATSã€PUPSï¼ˆBitcoin Puppetsï¼‰ã€TRAC

### æ”¯æŒçš„ NFT æ”¶è—å“

- **ä»¥å¤ªåŠ**ï¼šBAYCã€MAYCã€Azukiã€CloneXã€Doodlesã€Pudgy Penguinsã€Moonbirdsã€Cryptopunksã€Meebitsã€Art Blocksã€PROOF Collective
- **Solana**ï¼šDeGodsã€y00tsã€Mad Ladsã€Solana Monkey Businessã€Okay Bearsã€Tensorians
- **æ¯”ç‰¹å¸åºæ•°**ï¼šNodeMonkesã€Bitcoin Puppetsã€Quantum Catsã€Ordinal Inscriptions
- **Polygon**ï¼šReddit Collectible Avatars
- **Base**ï¼šBased Fellas

### å…¶ä»–ç±»åˆ«

Meme å¸ï¼ˆDOGEã€SHIBã€PEPEã€BONKã€WIFã€FLOKIï¼‰ã€éšç§å¸ï¼ˆXMRã€ZECï¼‰ã€é¢„è¨€æœºï¼ˆLINKã€PYTHï¼‰ã€AI ä»£å¸ï¼ˆFETã€AGIXã€TAOã€RNDRï¼‰ã€æ¸¸æˆå’Œå…ƒå®‡å®™ï¼ˆSANDã€MANAã€AXSã€IMXï¼‰ã€å­˜å‚¨ï¼ˆFILã€ARï¼‰ã€RWAï¼ˆONDOï¼‰ç­‰

## è‡ªå®šä¹‰æŒ‡å—

Coinbean çš„æ¨¡å—åŒ–ç»“æ„ä½¿å…¶æ˜“äºæ ¹æ®æ‚¨çš„ç‰¹å®šéœ€æ±‚è¿›è¡Œè‡ªå®šä¹‰ã€‚æœ¬èŠ‚è¯´æ˜å¦‚ä½•æ·»åŠ æ–°çš„äº¤æ˜“æ‰€ã€é’±åŒ…ã€åè®®å’ŒåŠ å¯†è´§å¸ã€‚

### ç†è§£æ¨¡å—åŒ–ç»“æ„

Coinbean å°†è´¦æˆ·ç»„ç»‡åˆ°å•ç‹¬çš„æ–‡ä»¶ä¸­ä»¥ä¾¿æ›´å¥½åœ°ç»´æŠ¤ï¼š

| æ–‡ä»¶ | ç”¨é€” | ä½•æ—¶ç¼–è¾‘ |
|------|---------|--------------|
| `crypto_main.beancount` | å•†å“å®šä¹‰ã€æ ¸å¿ƒè´¦æˆ· | æ·»åŠ æ–°åŠ å¯†è´§å¸ |
| `exchanges.beancount` | ä¸­å¿ƒåŒ–äº¤æ˜“æ‰€è´¦æˆ· | æ·»åŠ æ–°äº¤æ˜“æ‰€ |
| `chains.beancount` | é’±åŒ…å’ŒåŸç”Ÿè´¨æŠ¼ | æ·»åŠ é’±åŒ…æˆ–è´¨æŠ¼ |
| `defi.beancount` | DeFi åè®® | æ·»åŠ  DeFi åè®® |
| `tx_2025.beancount` | å½“å‰å¹´åº¦äº¤æ˜“ | è®°å½•æ‚¨çš„äº¤æ˜“ |

### æ·»åŠ æ–°äº¤æ˜“æ‰€

**è¦ç¼–è¾‘çš„æ–‡ä»¶ï¼š**`exchanges.beancount`

**æ¨¡æ¿ï¼š**
```beancount
;; ========================================
;; æ‚¨çš„äº¤æ˜“æ‰€åç§°
;; ========================================

;; æ³•å¸è´¦æˆ·
2020-01-01 open Assets:Crypto:Exchange:YourExchange:Cash:USD
2020-01-01 open Assets:Crypto:Exchange:YourExchange:Cash:EUR

;; åŠ å¯†è´§å¸è´¦æˆ·
2020-01-01 open Assets:Crypto:Exchange:YourExchange:BTC
2020-01-01 open Assets:Crypto:Exchange:YourExchange:ETH
2020-01-01 open Assets:Crypto:Exchange:YourExchange:SOL
2020-01-01 open Assets:Crypto:Exchange:YourExchange:USDC
2020-01-01 open Assets:Crypto:Exchange:YourExchange:USDT

;; å…¶ä»–ä»£å¸çš„é€šç”¨è´¦æˆ·
2020-01-01 open Assets:Crypto:Exchange:YourExchange:Other
```

**ç¤ºä¾‹ - æ·»åŠ  Bitfinexï¼š**
```beancount
;; ========================================
;; BITFINEX
;; ========================================

2020-01-01 open Assets:Crypto:Exchange:Bitfinex:Cash:USD
2020-01-01 open Assets:Crypto:Exchange:Bitfinex:BTC
2020-01-01 open Assets:Crypto:Exchange:Bitfinex:ETH
2020-01-01 open Assets:Crypto:Exchange:Bitfinex:USDT
```

**æç¤ºï¼š**
- ä»…ä¸ºæ‚¨å®é™…æŒæœ‰çš„èµ„äº§åˆ›å»ºè´¦æˆ·
- ä½¿ç”¨ä¸€è‡´çš„å‘½åï¼ˆäº¤æ˜“æ‰€åç§°ä½¿ç”¨é©¼å³°å‘½åæ³•ï¼‰
- ä½¿ç”¨æ³¨é‡Šå¯¹ç›¸å…³è´¦æˆ·è¿›è¡Œåˆ†ç»„
- `Other` è´¦æˆ·å¯¹äºæ‚¨ä¸æƒ³å•ç‹¬è·Ÿè¸ªçš„ä»£å¸å¾ˆæœ‰ç”¨

### æ·»åŠ æ–°é’±åŒ…

**è¦ç¼–è¾‘çš„æ–‡ä»¶ï¼š**`chains.beancount`

**ç¡¬ä»¶é’±åŒ…ç¤ºä¾‹ï¼š**
```beancount
;; ========================================
;; COLDCARDï¼ˆæ¯”ç‰¹å¸ç¡¬ä»¶é’±åŒ…ï¼‰
;; ========================================

2020-01-01 open Assets:Crypto:Wallet:Coldcard:BTC
```

**è½¯ä»¶é’±åŒ…ç¤ºä¾‹ï¼š**
```beancount
;; ========================================
;; RABBY WALLETï¼ˆå¤šé“¾ï¼‰
;; ========================================

2020-01-01 open Assets:Crypto:Wallet:Rabby:ETH
2020-01-01 open Assets:Crypto:Wallet:Rabby:MATIC
2020-01-01 open Assets:Crypto:Wallet:Rabby:Tokens
```

**ç§»åŠ¨é’±åŒ…ç¤ºä¾‹ï¼š**
```beancount
;; ========================================
;; COINBASE WALLETï¼ˆç§»åŠ¨åº”ç”¨ï¼‰
;; ========================================

2020-01-01 open Assets:Crypto:Wallet:CoinbaseWallet:ETH
2020-01-01 open Assets:Crypto:Wallet:CoinbaseWallet:Tokens
```

**è´¦æˆ·å‘½åçº¦å®šï¼š**
```
Assets:Crypto:Wallet:{é’±åŒ…åç§°}:{èµ„äº§}
                     â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”¬â”€â”€â”˜
                         é’±åŒ…å     å…·ä½“ä»£å¸/é“¾
```

### æ·»åŠ åŸç”Ÿè´¨æŠ¼

**è¦ç¼–è¾‘çš„æ–‡ä»¶ï¼š**`chains.beancount`

**æ¨¡æ¿ï¼š**
```beancount
;; ========================================
;; è´¨æŠ¼ - {åŒºå—é“¾åç§°}
;; ========================================

;; å§”æ‰˜/è´¨æŠ¼èµ„äº§
2020-01-01 open Assets:Crypto:Staking:CHAIN:Delegated

;; å¾…å¤„ç†/è§£é™¤ç»‘å®šèµ„äº§
2020-01-01 open Assets:Crypto:Staking:CHAIN:Unbonding

;; è´¨æŠ¼å¥–åŠ±ç´¯ç§¯
2020-01-01 open Assets:Crypto:Staking:CHAIN:Rewards
```

**ç¤ºä¾‹ - Avalanche è´¨æŠ¼ï¼š**
```beancount
;; ========================================
;; è´¨æŠ¼ - AVALANCHE
;; ========================================

2020-01-01 open Assets:Crypto:Staking:AVAX:Delegated
2020-01-01 open Assets:Crypto:Staking:AVAX:Rewards
```

**ç¤ºä¾‹äº¤æ˜“ - è´¨æŠ¼ AVAXï¼š**
```beancount
2025-01-15 * "è´¨æŠ¼ AVAX" "å§”æ‰˜ç»™éªŒè¯è€…"
  Assets:Crypto:Staking:AVAX:Delegated    100 AVAX
  Assets:Crypto:Wallet:Avalanche:AVAX    -100 AVAX
  Expenses:Crypto:Gas:Avalanche           0.01 AVAX
```

### æ·»åŠ  DeFi åè®®

**è¦ç¼–è¾‘çš„æ–‡ä»¶ï¼š**`defi.beancount`

**å€Ÿè´·åè®®ç¤ºä¾‹ï¼š**
```beancount
;; ========================================
;; VENUS PROTOCOLï¼ˆBSC å€Ÿè´·ï¼‰
;; ========================================

2020-01-01 open Assets:Crypto:DeFi:Venus:BNB
2020-01-01 open Assets:Crypto:DeFi:Venus:USDT
2020-01-01 open Assets:Crypto:DeFi:Venus:Supplied
2020-01-01 open Liabilities:Crypto:DeFi:Venus:Borrowed
```

**DEX æµåŠ¨æ€§æ± ç¤ºä¾‹ï¼š**
```beancount
;; ========================================
;; ORCAï¼ˆSolana DEXï¼‰
;; ========================================

2020-01-01 open Assets:Crypto:DeFi:Orca:SOL
2020-01-01 open Assets:Crypto:DeFi:Orca:USDC
2020-01-01 open Assets:Crypto:DeFi:Orca:LP-Tokens
  name: "Orca LP ä»£å¸"
2020-01-01 open Assets:Crypto:DeFi:Orca:ORCA
  name: "ORCA æ²»ç†ä»£å¸"
```

**æ°¸ç»­åˆçº¦ DEX ç¤ºä¾‹ï¼š**
```beancount
;; ========================================
;; VERTEX PROTOCOLï¼ˆArbitrum æ°¸ç»­åˆçº¦ï¼‰
;; ========================================

2020-01-01 open Assets:Crypto:DeFi:Vertex:USDC
2020-01-01 open Assets:Crypto:DeFi:Vertex:Positions
  name: "æ´»è·ƒçš„æ°¸ç»­åˆçº¦å¤´å¯¸"
2020-01-01 open Assets:Crypto:DeFi:Vertex:VRTX
```

**æµåŠ¨æ€§è´¨æŠ¼ç¤ºä¾‹ï¼š**
```beancount
;; ========================================
;; BENQIï¼ˆAvalanche æµåŠ¨æ€§è´¨æŠ¼ï¼‰
;; ========================================

2020-01-01 open Assets:Crypto:DeFi:Benqi:SAVAX
  name: "è´¨æŠ¼çš„ AVAXï¼ˆæµåŠ¨æ€§ï¼‰"
2020-01-01 open Assets:Crypto:DeFi:Benqi:QI
  name: "QI æ²»ç†ä»£å¸"
```

### æ·»åŠ æ–°åŠ å¯†è´§å¸

**è¦ç¼–è¾‘çš„æ–‡ä»¶ï¼š**`crypto_main.beancount`

**æ¨¡æ¿ï¼š**
```beancount
2020-01-01 commodity TICKER
  name: "å…¨å"
  asset-class: "cryptocurrency"
  blockchain: "åŒºå—é“¾åç§°"
  category: "ç±»åˆ«"
  export: "CASH"
```

**Layer-1 åŒºå—é“¾ç¤ºä¾‹ï¼š**
```beancount
2020-01-01 commodity ALGO
  name: "Algorand"
  asset-class: "cryptocurrency"
  blockchain: "Algorand"
  category: "Layer-1"
  export: "CASH"
```

**DeFi ä»£å¸ç¤ºä¾‹ï¼š**
```beancount
2020-01-01 commodity CAKE
  name: "PancakeSwap"
  asset-class: "cryptocurrency"
  blockchain: "BNB Chain"
  category: "DeFi"
  export: "CASH"
```

**æµåŠ¨æ€§è´¨æŠ¼ä»£å¸ç¤ºä¾‹ï¼š**
```beancount
2020-01-01 commodity CBETH
  name: "Coinbase Wrapped Staked ETH"
  asset-class: "cryptocurrency"
  blockchain: "Ethereum"
  category: "Liquid Staking"
  pegged-to: "ETH"
  export: "CASH"
```

**é‡è¦è§„åˆ™ï¼š**
- âœ… ä»£ç å¿…é¡»å…¨éƒ¨å¤§å†™
- âœ… ä¸èƒ½ä»¥æ•°å­—å¼€å¤´ï¼ˆä½¿ç”¨ `INCH` è€Œä¸æ˜¯ `1INCH`ï¼‰
- âœ… ä¸èƒ½åŒ…å«å°å†™å­—æ¯æˆ–é™¤ä¸‹åˆ’çº¿å¤–çš„ç‰¹æ®Šå­—ç¬¦
- âœ… ä½¿ç”¨æè¿°æ€§ç±»åˆ«ï¼šLayer-1ã€Layer-2ã€DeFiã€Stablecoinã€NFTã€Meme ç­‰

**å¸¸è§ç±»åˆ«ï¼š**
- `Layer-1` - åŸºç¡€åŒºå—é“¾ï¼ˆBTCã€ETHã€SOLï¼‰
- `Layer-2` - æ‰©å®¹è§£å†³æ–¹æ¡ˆï¼ˆMATICã€OPã€ARBï¼‰
- `DeFi` - å»ä¸­å¿ƒåŒ–é‡‘èï¼ˆUNIã€AAVEã€CRVï¼‰
- `Liquid Staking` - è´¨æŠ¼è¡ç”Ÿå“ï¼ˆLDOã€RPLã€JTOï¼‰
- `DEX` - å»ä¸­å¿ƒåŒ–äº¤æ˜“æ‰€ä»£å¸ï¼ˆRAYã€JUPï¼‰
- `Perpetual DEX` - æ°¸ç»­åˆçº¦å¹³å°ï¼ˆDYDXã€GMXã€HYPEï¼‰
- `Stablecoin` - ä¸æ³•å¸æŒ‚é’©ï¼ˆUSDCã€USDTã€DAIï¼‰
- `NFT Marketplace` - NFT å¹³å°ï¼ˆBLURã€LOOKSï¼‰
- `BRC-20` - æ¯”ç‰¹å¸åºæ•°ä»£å¸ï¼ˆORDIã€SATSï¼‰
- `AI` - AI/ML ä»£å¸ï¼ˆFETã€AGIXã€TAOï¼‰
- `Gaming` - æ¸¸æˆä»£å¸ï¼ˆAXSã€GALAï¼‰
- `Meme` - Meme å¸ï¼ˆDOGEã€SHIBã€BONKï¼‰

### æ·»åŠ  NFT æ”¶è—å“

**è¦ç¼–è¾‘çš„æ–‡ä»¶ï¼š**`chains.beancount`ï¼ˆæˆ–åˆ›å»º `nft.beancount`ï¼‰

**æ¨¡æ¿ï¼š**
```beancount
;; NFT æ”¶è—å“ - {åŒºå—é“¾}
2020-01-01 open Assets:Crypto:NFT:Blockchain:CollectionName
  name: "å®Œæ•´æ”¶è—å“åç§°"
```

**ç¤ºä¾‹ï¼š**
```beancount
;; NFT æ”¶è—å“ - ä»¥å¤ªåŠ
2020-01-01 open Assets:Crypto:NFT:Ethereum:Pudgy
  name: "Pudgy Penguins"

;; NFT æ”¶è—å“ - Solana
2020-01-01 open Assets:Crypto:NFT:Solana:MadLads

;; NFT æ”¶è—å“ - æ¯”ç‰¹å¸åºæ•°
2020-01-01 open Assets:Crypto:NFT:Bitcoin:NodeMonkes
```

### æ·»åŠ ä»·æ ¼è·å–æ”¯æŒ

**è¦ç¼–è¾‘çš„æ–‡ä»¶ï¼š**`fetch_prices.py`

è¦ä¸ºæ–°åŠ å¯†è´§å¸æ·»åŠ è‡ªåŠ¨ä»·æ ¼è·å–ï¼š

1. åœ¨ https://www.coingecko.com/ æ‰¾åˆ° CoinGecko ID
2. æ·»åŠ åˆ° `fetch_prices.py` ä¸­çš„ `ASSETS` åˆ—è¡¨ï¼š

```python
ASSETS = [
    # ... ç°æœ‰èµ„äº§ ...
    Asset('YOUR', 'Your Coin Name', 'Ethereum', 'DeFi', 'your-coin-coingecko-id'),
]
```

**ç¤ºä¾‹ï¼š**
```python
Asset('CAKE', 'PancakeSwap', 'BNB Chain', 'DEX', 'pancakeswap-token'),
```

**ç»“æ„ï¼š**
- `ticker` - Beancount ä¸­çš„ç¬¦å·ï¼ˆå¤§å†™ï¼‰
- `name` - èµ„äº§çš„å…¨å
- `chain` - åŒºå—é“¾ï¼ˆå¸®åŠ©åŒºåˆ†å¤šé“¾èµ„äº§ï¼‰
- `category` - ç±»åˆ«ï¼ˆLayer-1ã€DEX ç­‰ï¼‰
- `coingecko_id` - CoinGecko API æ ‡è¯†ç¬¦ï¼ˆæ¥è‡ª URL slugï¼‰

### ç¦ç”¨æ¨¡å—

å¦‚æœæ‚¨ä¸ä½¿ç”¨æŸäº›äº¤æ˜“æ‰€æˆ–åè®®ï¼Œå¯ä»¥åœ¨ `crypto_main.beancount` ä¸­å°†å®ƒä»¬æ³¨é‡Šæ‰ï¼š

```beancount
;; ä¸­å¿ƒåŒ–äº¤æ˜“æ‰€
include "exchanges.beancount"

;; åŒºå—é“¾é’±åŒ…å’ŒåŸç”Ÿè´¨æŠ¼
include "chains.beancount"

;; DeFi åè®®å’ŒæµåŠ¨æ€§è´¨æŠ¼
; include "defi.beancount"  ; <-- å¦‚æœæ‚¨ä¸ä½¿ç”¨ DeFiï¼Œåˆ™æ³¨é‡Šæ‰
```

### éªŒè¯

è¿›è¡Œæ›´æ”¹åï¼Œå§‹ç»ˆéªŒè¯æ‚¨çš„è´¦æœ¬ï¼š

```bash
bean-check crypto_main.beancount
```

å¦‚æœæ²¡æœ‰é”™è¯¯ï¼Œæ‚¨å°±å¯ä»¥å¼€å§‹äº†ï¼å¦‚æœæœ‰é”™è¯¯ï¼Œè¾“å‡ºä¼šå‡†ç¡®å‘Šè¯‰æ‚¨å“ªä¸€è¡Œæœ‰é—®é¢˜ã€‚

## äº¤æ˜“ç¤ºä¾‹

`crypto_examples.beancount` æ–‡ä»¶åŒ…å« 20+ ä¸ªç»¼åˆç¤ºä¾‹ï¼Œæ¶µç›–ï¼š

1. ç”¨æ³•å¸è´­ä¹°åŠ å¯†è´§å¸ï¼ˆå¸‚ä»·ä¹°å…¥ï¼‰
2. å‡ºå”®åŠ å¯†è´§å¸æ¢æ³•å¸
3. åŠ å¯†è´§å¸å¯¹åŠ å¯†è´§å¸çš„äº¤æ˜“
4. å‘äº¤æ˜“æ‰€å­˜å…¥æ³•å¸
5. å°†åŠ å¯†è´§å¸æå–åˆ°å†·é’±åŒ…
6. ä»å†·é’±åŒ…å­˜å…¥åŠ å¯†è´§å¸
7. è´¨æŠ¼å¥–åŠ±
8. äº¤æ˜“è´¹ç”¨
9. Gas è´¹ç”¨ï¼ˆä»¥å¤ªåŠï¼‰
10. DeFi æµåŠ¨æ€§æä¾›
11. DeFi æ”¶ç›Šèµšå–
12. ç©ºæŠ•
13. è´­ä¹°ç¨³å®šå¸
14. è·¨äº¤æ˜“æ‰€è½¬è´¦
15. å®šæŠ•ï¼ˆDCAï¼‰
16. æŒ–çŸ¿å¥–åŠ±
17. DeFi å€Ÿæ¬¾
18. å¿è¿˜ DeFi è´·æ¬¾
19. NFT è´­ä¹°
20. äº¤æ˜“æ‰€ä»£å¸å¥–åŠ±
21. å°†å°˜åŸƒè½¬æ¢ä¸º BNB

## ç¨åŠ¡æŠ¥å‘Š

### åº”ç¨äº‹ä»¶

1. **èµ„æœ¬åˆ©å¾—/æŸå¤±**
   - å‡ºå”®åŠ å¯†è´§å¸æ¢æ³•å¸
   - ä¸€ç§åŠ å¯†è´§å¸äº¤æ˜“å¦ä¸€ç§
   - ä½¿ç”¨åŠ å¯†è´§å¸è´­ä¹°å•†å“/æœåŠ¡

2. **æ”¶å…¥**
   - è´¨æŠ¼å¥–åŠ±
   - æŒ–çŸ¿å¥–åŠ±
   - DeFi åˆ©æ¯/æ”¶ç›Š
   - ç©ºæŠ•
   - æ¨èå¥–é‡‘

### ç¨åŠ¡ç›®çš„è®°å½•

å§‹ç»ˆè·Ÿè¸ªï¼š
- **æˆæœ¬åŸºç¡€**ï¼šåŸå§‹è´­ä¹°ä»·æ ¼ `{ä»·æ ¼ USD}`
- **å”®ä»·**ï¼šå½“å‰å¸‚åœºä»·æ ¼ `@ ä»·æ ¼ USD`
- **èµ„æœ¬åˆ©å¾—**ï¼šè®°å½•åœ¨ `Income:Crypto:Trading:CapitalGains`
- **æ”¶å…¥**ï¼šè®°å½•åœ¨é€‚å½“çš„ `Income:Crypto:*` è´¦æˆ·
- **è´¹ç”¨**ï¼šåœ¨ `Expenses:Crypto:*` è´¦æˆ·ä¸­å•ç‹¬è·Ÿè¸ª

### ç”Ÿæˆç¨åŠ¡æŠ¥å‘Š

```bash
# æŸ¥çœ‹æ‰€æœ‰èµ„æœ¬åˆ©å¾—
bean-query crypto_main.beancount "
  SELECT date, account, sum(cost(position)), sum(value(position))
  WHERE account ~ 'CapitalGains'
  GROUP BY date, account
  ORDER BY date
"

# æŸ¥çœ‹æ‰€æœ‰è´¨æŠ¼æ”¶å…¥
bean-query crypto_main.beancount "
  SELECT date, account, sum(position)
  WHERE account ~ 'Staking:Rewards'
  ORDER BY date
"
```

## æŠ¥å‘Š

ä½¿ç”¨ Beancount å‘½ä»¤ç”Ÿæˆå„ç§æŠ¥å‘Šï¼š

```bash
# éªŒè¯æ‚¨çš„è´¦æœ¬
bean-check crypto_main.beancount

# æ£€æŸ¥è´¦æˆ·ä½™é¢
bean-report crypto_main.beancount balances

# æŸ¥çœ‹å‡€å€¼
bean-report crypto_main.beancount networth

# å¯¼å‡ºåˆ° CSV
bean-report crypto_main.beancount holdings > holdings.csv

# ç”ŸæˆæŸç›Šè¡¨
bean-report crypto_main.beancount income_statement

# æŸ¥è¯¢ç‰¹å®šæ•°æ®
bean-query crypto_main.beancount "SELECT account, sum(position) WHERE account ~ 'BTC'"

# åœ¨è‡ªå®šä¹‰ç«¯å£ä¸Šå¯åŠ¨ Fava
./run.sh -p 5003
```

## å®‰å…¨

### ä½¿ç”¨ Git ä¿æŠ¤æ‚¨çš„è´¢åŠ¡æ•°æ®

**é‡è¦**ï¼šå¦‚æœæ‚¨ä½¿ç”¨ Git å¯¹ Beancount æ–‡ä»¶è¿›è¡Œç‰ˆæœ¬æ§åˆ¶ï¼Œæ‚¨çš„äº¤æ˜“æ•°æ®åŒ…å«æ•æ„Ÿçš„è´¢åŠ¡ä¿¡æ¯ã€‚**åœ¨å°†æ–‡ä»¶æäº¤åˆ°ä»»ä½•å­˜å‚¨åº“ä¹‹å‰ï¼Œæ‚¨å¿…é¡»å¯¹å…¶è¿›è¡ŒåŠ å¯†ã€‚**

**æ¨èæ–¹æ³•ï¼š**

1. **ä½¿ç”¨ git-crypt**ï¼ˆæ¨èï¼‰æˆ– **git-secret** åŠ å¯†æ•æ„Ÿæ–‡ä»¶
2. åŠ å¯†æ‰€æœ‰åŒ…å«å®é™…äº¤æ˜“æ•°æ®çš„ `.beancount` æ–‡ä»¶
3. å°†åŠ å¯†å¯†é’¥æ·»åŠ åˆ° `.gitignore` ä»¥é˜²æ­¢æ„å¤–æäº¤

**ä½¿ç”¨ git-crypt çš„ç¤ºä¾‹è®¾ç½®ï¼š**

```bash
# å®‰è£… git-crypt
brew install git-crypt  # macOS
# æˆ–ï¼šsudo apt-get install git-crypt  # Linux

# åœ¨æ‚¨çš„å­˜å‚¨åº“ä¸­åˆå§‹åŒ– git-crypt
cd /path/to/coinbean
git-crypt init

# åœ¨ .gitattributes ä¸­æŒ‡å®šè¦åŠ å¯†çš„æ–‡ä»¶
echo "*.beancount filter=git-crypt diff=git-crypt" >> .gitattributes
echo "tx_*.beancount filter=git-crypt diff=git-crypt" >> .gitattributes

# æ·»åŠ åä½œè€…ï¼ˆå¯é€‰ï¼‰
git-crypt add-gpg-user YOUR_GPG_KEY_ID
```

**è¦åŠ å¯†çš„å†…å®¹ï¼š**
- âœ… æ‰€æœ‰äº¤æ˜“æ–‡ä»¶ï¼ˆ`tx_*.beancount`ï¼‰
- âœ… å…·æœ‰çœŸå®ä½™é¢çš„è´¦æˆ·æ–‡ä»¶ï¼ˆ`exchanges.beancount`ã€`chains.beancount`ã€`defi.beancount`ï¼‰
- âœ… åŒ…å«æ‚¨å®é™…å¤´å¯¸çš„ä»·æ ¼æ–‡ä»¶
- âŒ æ¨¡æ¿/ç¤ºä¾‹æ–‡ä»¶å¯ä»¥ä¿æŒæœªåŠ å¯†

**å…¶ä»–å®‰å…¨æªæ–½ï¼š**
- ä¸ºæ•æ„Ÿæ•°æ®ä¸æ¨¡æ¿ä½¿ç”¨å•ç‹¬çš„åˆ†æ”¯
- åˆ‡å‹¿å°†æœªåŠ å¯†çš„è´¢åŠ¡æ•°æ®æ¨é€åˆ°å…¬å…±å­˜å‚¨åº“
- åœ¨æ¨é€å‰æŸ¥çœ‹æ‰€æœ‰æäº¤ä»¥ç¡®ä¿æ²¡æœ‰æš´éœ²æ•æ„Ÿæ•°æ®
- å³ä½¿åŠ å¯†ï¼Œä¹Ÿè¦è€ƒè™‘ä½¿ç”¨ç§æœ‰å­˜å‚¨åº“

## æœ€ä½³å®è·µ

1. **åŠæ—¶è®°å½•äº¤æ˜“**ï¼šåœ¨äº¤æ˜“å‘ç”Ÿæ—¶è®°å½• - ä¸è¦è®©å®ƒä»¬å †ç§¯
2. **è·Ÿè¸ªæ¯ç¬”è´¹ç”¨**ï¼šææ¬¾ã€äº¤æ˜“å’Œ Gas è´¹ç”¨éƒ½æ˜¯å¯æŠµæ‰£çš„ç¨åŠ¡æ”¯å‡º
3. **å®šæœŸæ›´æ–°ä»·æ ¼**ï¼šæ¯å‘¨æœ€å°‘ï¼Œæ´»è·ƒäº¤æ˜“è€…æ¯å¤©æ›´æ–°
4. **å¤‡ä»½æ‚¨çš„æ•°æ®**ï¼šå®šæœŸæäº¤åˆ° git å¹¶ä¿ç•™äº¤æ˜“æ‰€å¯¼å‡ºæ–‡ä»¶
5. **å®šæœŸå¯¹è´¦**ï¼šæ¯æœˆä¸äº¤æ˜“æ‰€ä½™é¢è¿›è¡Œæ¯”è¾ƒ
6. **è®°å½•å¤æ‚äº¤æ˜“**ï¼šä¸ºä¸å¯»å¸¸çš„äº¤æ˜“å’Œ DeFi å¤´å¯¸æ·»åŠ æ³¨é‡Š
7. **åˆ†ç¦»çƒ­é’±åŒ…å’Œå†·é’±åŒ…**ï¼šä½¿ç”¨ä¸åŒçš„è´¦æˆ·å¹¶è·Ÿè¸ªè½¬è´¦è´¹ç”¨
8. **ä¸ºç¨åŠ¡åšè®¡åˆ’**ï¼šå‡†ç¡®è®°å½•æˆæœ¬åŸºç¡€å¹¶å’¨è¯¢ç¨åŠ¡ä¸“ä¸šäººå£«
9. **ä½¿ç”¨ä¸€è‡´çš„è´¦æˆ·**ï¼šåšæŒå‘½åçº¦å®šå¹¶ä¿æŒç»„ç»‡æœ‰åº
10. **éšç§**ï¼šåˆ‡å‹¿å°†åŒ…å«çœŸå®äº¤æ˜“æ•°æ®çš„æ–‡ä»¶æäº¤åˆ°å…¬å…±å­˜å‚¨åº“

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

**"bean-check æŠ¥å‘Šé”™è¯¯"**
- æ£€æŸ¥è´¦æˆ·åç§°ä¸­çš„æ‹¼å†™é”™è¯¯
- ç¡®ä¿æ‰€æœ‰äº¤æ˜“å¹³è¡¡
- éªŒè¯å•†å“ç¬¦å·åŒ¹é…

**"Fava ä¸­æœªæ˜¾ç¤ºä»·æ ¼"**
- æ›´æ–° `crypto_prices.beancount`
- ç¡®ä¿æ—¥æœŸæ ¼å¼ä¸º YYYY-MM-DD
- æ£€æŸ¥å•†å“ç¬¦å·å®Œå…¨åŒ¹é…

**"ä½™é¢ä¸äº¤æ˜“æ‰€ä¸åŒ¹é…"**
- æŒ‰æ—¶é—´é¡ºåºæŸ¥çœ‹æ‰€æœ‰äº¤æ˜“
- æ£€æŸ¥é—æ¼çš„è´¹ç”¨
- éªŒè¯è½¬è´¦é‡‘é¢

**"Fava æ— æ³•å¯åŠ¨"**
- ç¡®ä¿ Fava å·²å®‰è£…ï¼š`pip3 install fava`
- æ£€æŸ¥ç«¯å£æ˜¯å¦æœªè¢«ä½¿ç”¨ï¼šå°è¯• `./run.sh -p 5003`
- éªŒè¯è´¦æœ¬ï¼š`bean-check crypto_main.beancount`

### è·å–å¸®åŠ©

- **Beancount æ–‡æ¡£**ï¼šhttps://beancount.github.io/docs/
- **Fava æ–‡æ¡£**ï¼šhttps://beancount.github.io/fava/
- **Beancount é‚®ä»¶åˆ—è¡¨**ï¼šhttps://groups.google.com/forum/#!forum/beancount
- **Fava GitHub**ï¼šhttps://github.com/beancount/fava

## é«˜çº§ä¸»é¢˜

### ä½¿ç”¨ bean-query è‡ªå®šä¹‰æŸ¥è¯¢

ä½¿ç”¨ `bean-query` åˆ›å»ºè‡ªå®šä¹‰æŠ¥å‘Šï¼š

```bash
# æ€»æŠ•èµ„ç»„åˆä»·å€¼
bean-query crypto_main.beancount "
  SELECT sum(convert(value(position), 'USD')) AS total_value
  WHERE account ~ 'Assets:Crypto'
"

# æŒ‰ä»·å€¼æ’åå‰ 5 çš„æŒä»“
bean-query crypto_main.beancount "
  SELECT account, sum(convert(value(position), 'USD')) AS value
  WHERE account ~ 'Assets:Crypto'
  GROUP BY account
  ORDER BY value DESC
  LIMIT 5
"

# æ¯æœˆè´¨æŠ¼æ”¶å…¥
bean-query crypto_main.beancount "
  SELECT year(date), month(date), sum(position)
  WHERE account = 'Income:Crypto:Staking:Rewards'
  GROUP BY year(date), month(date)
  ORDER BY year(date), month(date)
"
```

### æ‰©å±•ä»·æ ¼è·å–å™¨

`fetch_prices.py` è„šæœ¬å¯ä»¥è½»æ¾æ‰©å±•ã€‚è¦æ·»åŠ æ–°çš„åŠ å¯†è´§å¸ï¼š

1. åœ¨ https://www.coingecko.com/ æ‰¾åˆ° CoinGecko ID
2. å°†å…¶æ·»åŠ åˆ° `fetch_prices.py` ä¸­çš„ `ASSETS` åˆ—è¡¨ï¼Œå¹¶åŒ…å«é“¾å’Œç±»åˆ«ä¿¡æ¯
3. å°†å•†å“å®šä¹‰æ·»åŠ åˆ° `crypto_main.beancount`

ç¤ºä¾‹ï¼š
```python
# åœ¨ fetch_prices.py ä¸­ - æ·»åŠ åˆ° ASSETS åˆ—è¡¨
ASSETS = [
    # ... ç°æœ‰èµ„äº§ ...
    Asset('NEW', 'New Coin Name', 'Ethereum', 'DeFi', 'new-coin-coingecko-id'),
]
```

Asset ç»“æ„åŒ…æ‹¬ï¼š
- `ticker`ï¼šBeancount ä¸­ä½¿ç”¨çš„ç¬¦å·ï¼ˆå¤§å†™ï¼‰
- `name`ï¼šèµ„äº§çš„å…¨å
- `chain`ï¼šåŒºå—é“¾/ç½‘ç»œï¼ˆå¸®åŠ©åŒºåˆ†ä¸åŒé“¾ä¸Šçš„ç›¸åŒä»£ç ï¼‰
- `category`ï¼šç±»å‹ï¼ˆLayer-1ã€DEXã€æµåŠ¨æ€§è´¨æŠ¼ç­‰ï¼‰
- `coingecko_id`ï¼šCoinGecko API æ ‡è¯†ç¬¦

## èµ„æº

è®¿é—® [coinbean.org/docs](http://coinbean.org/docs) äº†è§£æ›´å¤šå…³äºï¼š
- é«˜çº§äº¤æ˜“æ¨¡å¼
- ç¨åŠ¡æŠ¥å‘Šç­–ç•¥
- ä¸å…¶ä»–å·¥å…·é›†æˆ
- ç¤¾åŒºæœ€ä½³å®è·µ

**é¡¹ç›®é“¾æ¥ï¼š**
- ğŸ“¦ [GitHub å­˜å‚¨åº“](https://github.com/qai-lab/coinbean) - æºä»£ç ã€é—®é¢˜å’Œè´¡çŒ®
- ğŸ“‹ [å‘å¸ƒè¯´æ˜](https://github.com/qai-lab/coinbean/releases) - ç‰ˆæœ¬å†å²å’Œæ›´æ–°æ—¥å¿—
- ğŸŒ [Coinbean ç½‘ç«™](https://coinbean.org/) - å®˜æ–¹ç½‘ç«™å’Œæ–‡æ¡£
- ğŸ¦ [Coinbean X/Twitter](https://x.com/coinbean_org) - å…³æ³¨è·å–æ›´æ–°å’Œæ–°é—»
- ğŸ“š [Beancount æ–‡æ¡£](https://beancount.github.io/docs/) - äº†è§£ Beancount
- ğŸ–¥ï¸ [Fava - Web ç•Œé¢](https://github.com/beancount/fava) - Beancount Web ç•Œé¢
- ğŸ’¬ [çº¯æ–‡æœ¬è®°è´¦](https://plaintextaccounting.org/) - ç¤¾åŒºå’Œèµ„æº

## è´¡çŒ®

æ¬¢è¿è´¡çŒ®ï¼è¯·éšæ—¶æäº¤ Pull Requestã€‚è´¡çŒ®é¢†åŸŸï¼š

- é¢å¤–çš„äº¤æ˜“æ‰€æ¨¡æ¿
- æ›´å¤š DeFi åè®®
- å¯¼å…¥äº¤æ˜“çš„è‡ªåŠ¨åŒ–è„šæœ¬
- æ–‡æ¡£æ”¹è¿›

## ä½œè€…

**Coinbean** ç”±ä»¥ä¸‹äººå‘˜åˆ›å»ºå’Œç»´æŠ¤ï¼š

- **Boyuan Qian**
  - ğŸ™ GitHub: [@boyuanqian](https://github.com/boyuanqian)
  - ğŸ¦ X/Twitter: [@boyuan_qian](https://x.com/boyuan_qian)
  - ğŸ¢ ç»„ç»‡ï¼š[QAI Lab](https://github.com/qai-lab)

**QAI Lab**
  - ğŸ™ GitHub: [@qai-lab](https://github.com/qai-lab)
  - ğŸ¦ X/Twitter: [@qai_lab](https://x.com/qai_lab)

## è®¸å¯è¯

MIT è®¸å¯è¯ - ç‰ˆæƒæ‰€æœ‰ (c) 2025 Boyuan Qian å’Œ QAI Lab

è¯¦æƒ…è¯·å‚é˜… [LICENSE](LICENSE) æ–‡ä»¶ã€‚

æ­¤æ¨¡æ¿æŒ‰åŸæ ·æä¾›ä¾›ä¸ªäººä½¿ç”¨ã€‚æ ¹æ®æ‚¨çš„æŠ•èµ„ç»„åˆè·Ÿè¸ªéœ€æ±‚è¿›è¡Œè‡ªå®šä¹‰ã€‚

## å…è´£å£°æ˜

è¿™æ˜¯ä¸€ä¸ªä¸ªäººè´¢åŠ¡è·Ÿè¸ªå·¥å…·ã€‚å®ƒä¸æä¾›ï¼š
- è´¢åŠ¡å»ºè®®
- ç¨åŠ¡å»ºè®®
- æŠ•èµ„å»ºè®®

å¯¹äºè´¢åŠ¡å’Œç¨åŠ¡äº‹å®œï¼Œè¯·å§‹ç»ˆå’¨è¯¢åˆæ ¼çš„ä¸“ä¸šäººå£«ã€‚åŠ å¯†è´§å¸æŠ•èµ„æœ‰é£é™©ï¼Œå¯èƒ½å¯¼è‡´èµ„æœ¬æŸå¤±ã€‚

---

**ç¥è·Ÿè¸ªæ„‰å¿«ï¼ ğŸ“ŠğŸ’°**
